# إعداد MCP Server للتكامل مع Figma

## معلومات الخادم
- **عنوان الخادم**: `http://127.0.0.1:3845/mcp`
- **النوع**: HTTP MCP Server
- **الغرض**: التكامل مع Figma للحصول على التصاميم

## خطوات الإعداد في Cursor

### 1. فتح إعدادات Cursor
1. اضغط `Ctrl+,` (أو `Cmd+,` على Mac)
2. انتقل إلى **Features** > **Model Context Protocol**

### 2. إضافة خادم MCP جديد
أضف الإعدادات التالية في قسم MCP Servers:

```json
{
  "mcpServers": {
    "figma-local": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-figma"
      ],
      "env": {
        "FIGMA_ACCESS_TOKEN": "your-figma-token-here"
      }
    }
  }
}
```

أو إذا كان الخادم يعمل بشكل مستقل:

```json
{
  "mcpServers": {
    "figma-local": {
      "url": "http://127.0.0.1:3845/mcp",
      "transport": "http"
    }
  }
}
```

### 3. التحقق من الاتصال
بعد إضافة الإعدادات:
1. أعد تشغيل Cursor
2. تأكد من أن الخادم يعمل على `http://127.0.0.1:3845/mcp`
3. جرب استخدام أدوات MCP للوصول إلى Figma

## الأوامر المتاحة

يمكن استخدام الأدوات التالية بعد التكوين:

1. **get_design_context**: الحصول على كود التصميم من Figma
2. **get_screenshot**: الحصول على لقطة شاشة للتصميم
3. **get_metadata**: الحصول على البيانات الوصفية للعقد
4. **get_variable_defs**: الحصول على تعريفات المتغيرات
5. **get_figjam**: الحصول على محتوى FigJam

## استكشاف الأخطاء

### الخادم لا يستجيب
- تأكد من أن الخادم يعمل على المنفذ 3845
- تحقق من جدار الحماية (Firewall)
- تأكد من أن العنوان صحيح: `http://127.0.0.1:3845/mcp`

### خطأ في الاتصال
- تحقق من سجلات Cursor للتفاصيل
- تأكد من صحة إعدادات MCP في Cursor
- جرب إعادة تشغيل Cursor

## ملاحظات
- الخادم يعمل محلياً على `127.0.0.1:3845`
- يحتاج إلى Figma Access Token إذا كان الخادم يتطلب ذلك
- تأكد من وجود الاتصال بالإنترنت للوصول إلى Figma API

